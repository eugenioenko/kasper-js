!function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"execute",(function(){return p})),i.d(t,"parse",(function(){return m}));class r{constructor(e,t,i){this.line=t,this.col=i,this.value=e}toString(){return this.value.toString()}}class s{}class n extends s{constructor(e,t,i,r=0){super(),this.type="element",this.name=e,this.attributes=t,this.children=i,this.line=r}accept(e){return e.visitElementNode(this)}toString(){return"Node.Element"}}class h extends s{constructor(e,t,i=0){super(),this.type="attribute",this.name=e,this.value=t,this.line=i}accept(e){return e.visitAttributeNode(this)}toString(){return"Node.Attribute"}}class c extends s{constructor(e,t=0){super(),this.type="text",this.value=e,this.line=t}accept(e){return e.visitTextNode(this)}toString(){return"Node.Text"}}class o extends s{constructor(e,t=0){super(),this.type="comment",this.value=e,this.line=t}accept(e){return e.visitCommentNode(this)}toString(){return"Node.Comment"}}class a extends s{constructor(e,t=0){super(),this.type="doctype",this.value=e,this.line=t}accept(e){return e.visitDoctypeNode(this)}toString(){return"Node.Doctype"}}const u=[" ","\n","\t","\r"],l=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];class d{parse(e){for(this.current=0,this.line=1,this.col=1,this.source=e,this.errors=[],this.nodes=[];!this.eof();)try{const e=this.node();if(null===e)continue;this.nodes.push(e)}catch(e){if(e instanceof r)this.errors.push(`Parse Error (${e.line}:${e.col}) => ${e.value}`);else if(this.errors.push(""+e),this.errors.length>10)return this.errors.push("Parse Error limit exceeded"),this.nodes;break}return this.source="",this.nodes}match(...e){for(const t of e)if(this.check(t))return this.current+=t.length,!0;return!1}advance(e=""){this.eof()?this.error("Unexpected end of file. "+e):(this.check("\n")&&(this.line+=1,this.col=0),this.col+=1,this.current++)}peek(...e){for(const t of e)if(this.check(t))return!0;return!1}check(e){return this.source.slice(this.current,this.current+e.length)===e}eof(){return this.current>this.source.length}error(e){throw new r(e,this.line,this.col)}node(){let e;return this.whitespace(),this.match("</")&&this.error("Unexpected closing tag"),e=this.match("\x3c!--")?this.comment():this.match("<!doctype")||this.match("<!DOCTYPE")?this.doctype():this.match("<")?this.element():this.text(),this.whitespace(),e}comment(){const e=this.current;do{this.advance("Expected comment closing '--\x3e'")}while(!this.match("--\x3e"));const t=this.source.slice(e,this.current-3);return new o(t,this.line)}doctype(){const e=this.current;do{this.advance("Expected closing doctype")}while(!this.match(">"));const t=this.source.slice(e,this.current-1).trim();return new a(t,this.line)}element(){const e=this.line,t=this.identifier("/",">");t||this.error("Expected a tag name");const i=this.attributes();if(this.match("/>")||l.includes(t)&&this.match(">"))return new n(t,i,[],this.line);this.match(">")||this.error("Expected closing tag");let r=[];return this.whitespace(),this.peek("</")||(r=this.children(t)),this.close(t),new n(t,i,r,e)}close(e){this.match("</")||this.error(`Expected </${e}>`),this.match(""+e)||this.error(`Expected </${e}>`),this.whitespace(),this.match(">")||this.error(`Expected </${e}>`)}children(e){const t=[];do{this.eof()&&this.error(`Expected </${e}>`);const i=this.node();null!==i&&t.push(i)}while(!this.peek("</"));return t}attributes(){const e=[];for(;!this.peek(">","/>")&&!this.eof();){this.whitespace();const t=this.line,i=this.identifier("=",">","/>");i||this.error("Blank attribute name"),this.whitespace();let r="";this.match("=")&&(this.whitespace(),r=this.match("'")?this.string("'"):this.match('"')?this.string('"'):this.identifier(">","/>")),this.whitespace(),e.push(new h(i,r,t))}return e}text(){const e=this.current,t=this.line;for(;!this.peek("<")&&!this.eof();)this.advance();const i=this.source.slice(e,this.current).trim();return i?new c(i,t):null}whitespace(){let e=0;for(;this.peek(...u)&&!this.eof();)e+=1,this.advance();return e}identifier(...e){this.whitespace();const t=this.current;for(;!this.peek(...u,...e);)this.advance("Expected closing "+e);const i=this.current;return this.whitespace(),this.source.slice(t,i).trim()}string(e){const t=this.current;for(;!this.match(e);)this.advance("Expected closing "+e);return this.source.slice(t,this.current-1)}}function p(e){const t=new d,i=t.parse(e);if(t.errors.length)return JSON.stringify(t.errors);return JSON.stringify(i)}function m(e){const t=new d,i=t.parse(e);return t.errors.length?JSON.stringify(t.errors):JSON.stringify(i)}"undefined"!=typeof window?window.kasper={demoSourceCode:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>HTML5 Test Page</title>\n  </head>\n  <body>\n    <div id="top" role="document">\n      <header>\n        <h1>HTML5 Test Page</h1>\n        <p>This is a test page filled with common HTML elements to be used to provide visual feedback whilst building CSS systems and frameworks.</p>\n      </header>\n      <nav>\n        <ul>\n          <li>\n            <a href="#embedded">Embedded content</a>\n            <ul>\n              <li><a href="#embedded__images">Images</a></li>\n              <li><a href="#embedded__bgimages">Background images</a></li>\n              <li><a href="#embedded__audio">Audio</a></li>\n              <li><a href="#embedded__video">Video</a></li>\n              <li><a href="#embedded__canvas">Canvas</a></li>\n              <li><a href="#embedded__meter">Meter</a></li>\n              <li><a href="#embedded__progress">Progress</a></li>\n              <li><a href="#embedded__svg">Inline SVG</a></li>\n              <li><a href="#embedded__iframe">IFrames</a></li>\n              <li><a href="#embedded__embed">Embed</a></li>\n              <li><a href="#embedded__object">Object</a></li>\n            </ul>\n          </li>\n        </ul>\n      </nav>\n    </div>\n  </body>\n</html>\n',execute:p,parse:m}:exports.kasper={execute:p,parse:m}}]);